<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <meta name="viewport" content="width=device-width,height=device-height, user-scalable=no" />
  <title>Leaflet.Editable demo</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <script src="https://npmcdn.com/leaflet.path.drag/src/Path.Drag.js"></script>
  <script src="./lib/Leaflet.Editable.js"></script>
  <script src="./data/polygon.js"></script>
  <!-- Bootstarp -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="stylesheet" href="/css/stylesheet.css">


  <style type='text/css'>
      body { margin:0; padding:0; }
      #map { position:absolute; top:0; bottom:0; right: 0; left: 0; width:100%; }
</style>
</head>
<body>
  <nav class="navbar navbar-dark bg-dark fixed-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="#"></a>
      <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasDarkNavbar"
      aria-controls="offcanvasDarkNavbar">
      <span class="navbar-toggler-icon"></span>
      </button>
      <div class="offcanvas offcanvas-end text-bg-dark" tabindex="-1" id="offcanvasDarkNavbar"
      aria-labelledby="offcanvasDarkNavbarLabel">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasDarkNavbarLabel"></h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"
        aria-label="Close"></button>
      </div>
      <div class="offcanvas-body">
        <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
        <li class="nav-item">
          <a class="nav-link active text-dark h4" aria-current="page" href="#">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-dark h4" href="index.html">Routing</a>
          <a class="nav-link text-dark h4" href="">Alarms</a>
          <a class="nav-link text-dark h4" href="#">Schdules</a>
          <a class="nav-link text-dark h4" href="\Leaflet.AccuratePosition-master\main\index.html">Accurate Position</a>
          <a class="nav-link text-dark h4" href="#">Settings</a>
        </li>
         <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle  text-dark h4" href="#" role="button" data-bs-toggle="dropdown"
          aria-expanded="false">
          Draw maps
          </a>
          <ul class="dropdown-menu dropdown-menu-light">
          <li><a id="a" class="dropdown-item  text-dark h4" href="_draw/index.html">Draw Path</a></li>
          <li><a id="a" class="dropdown-item  text-dark h4" href="_draw/draw.html">draw1</a></li>
          <li><a id="a" class="dropdown-item  text-dark h4" href="#">draw2</a></li>
          <li><a id="a" class="dropdown-item  text-dark h4" href="#">draw</a></li>
          <li>
            <hr class="dropdown-divider">
          </li>
  
          </ul>
        </li> 
        </ul>
  
      </div>
      </div>
    </div>
    </nav>


  <div id='map'></div>

<script type="text/javascript">
// initialize map and add osm layer 
var map = L.map('map', {editable: true}).setView([43.1249, 1.254], 9);
var osmlayer = L.tileLayer('http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', 
    {attribution: 'Data \u00a9 <a href="http://www.openstreetmap.org/copyright"> OpenStreetMap Contributors </a> Tiles \u00a9 HOT'});

osmlayer.addTo(map);

// edit single feature 
var polyline = L.polyline([
    [43.1249, 1.254],
    [43.55, 1.28]
], {color: 'red'}).addTo(map);

polyline.enableEdit();

// polyline.disableEdit();

//geojson load
var geojsonLayer = L.geoJSON(geojsonData, {
  style: function(feature){
    switch(feature.geometry.type) {
      case "Point": return {color: 'blue'}
      case "LineString": return {color: 'red'}
      case "Polygon": return {color: "green", fillColor: 'yellow'}
    }
  }
}).addTo(map);

map.fitBounds(geojsonLayer.getBounds());

//enable edit geojson
geojsonLayer.eachLayer(function(layer){
  layer.enableEdit()
});

//save the edited geojson
geojsonLayer.eachLayer(function (layer) {
    var popupContent = "Name: " + layer.feature.properties.name;
    layer.bindPopup(popupContent);
}); 

//save the edited geojson
map.on('editable:editing', function(e){
  // add popup to the edited layer to download the edited geojson
  e.layer.bindPopup('<a href="data:text/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(geojsonLayer.toGeoJSON())) + '" download="geojson.json">Download GeoJSON</a>');
});


</script>
</body>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
	<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
</html>